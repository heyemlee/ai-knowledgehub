# AWS 部署环境变量配置模板
# 用于 AWS Secrets Manager 配置参考

# ==========================================
# 必需配置
# ==========================================

# 运行模式
MODE=production

# OpenAI 配置
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_EMBEDDING_MODEL=text-embedding-3-large

# Qdrant 向量数据库配置
QDRANT_URL=https://your-cluster-id.qdrant.io
QDRANT_API_KEY=your-qdrant-api-key-here
QDRANT_COLLECTION_NAME=knowledge_base

# JWT 密钥（重要：生成强随机密钥）
# 生成命令: python scripts/generate_jwt_secret.py
JWT_SECRET_KEY=your-very-strong-random-secret-key-here
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# 数据库配置（AWS RDS PostgreSQL）
# 格式: postgresql+asyncpg://username:password@host:port/database
DATABASE_URL=postgresql+asyncpg://admin:password@your-rds-endpoint.us-east-1.rds.amazonaws.com:5432/knowledgehub

# 前端 URL（部署后填入实际域名）
FRONTEND_URL=https://your-frontend-domain.com

# 后端 URL（ALB 或 API Gateway 地址）
BACKEND_URL=https://api.yourdomain.com

# ==========================================
# 可选配置（推荐）
# ==========================================

# Redis 缓存（AWS ElastiCache）
# 格式: redis://host:port
REDIS_URL=redis://your-elasticache-endpoint.cache.amazonaws.com:6379

# S3 存储桶名称（用于文件存储）
S3_BUCKET_NAME=knowledgehub-storage-your-account-id

# 日志配置
LOG_LEVEL=INFO
CLOUDWATCH_LOG_GROUP=knowledgehub-logs

# ==========================================
# AWS Secrets Manager 配置说明
# ==========================================

# 在 AWS Secrets Manager 中创建以下 secrets：
# 
# 1. knowledgehub/database-url
#    值: DATABASE_URL 的值
#
# 2. knowledgehub/openai-api-key
#    值: OPENAI_API_KEY 的值
#
# 3. knowledgehub/qdrant-url
#    值: QDRANT_URL 的值
#
# 4. knowledgehub/qdrant-api-key
#    值: QDRANT_API_KEY 的值
#
# 5. knowledgehub/jwt-secret
#    值: JWT_SECRET_KEY 的值（使用 scripts/generate_jwt_secret.py 生成）
#
# 6. knowledgehub/frontend-url
#    值: FRONTEND_URL 的值
#
# 7. knowledgehub/backend-url
#    值: BACKEND_URL 的值
#
# 8. knowledgehub/redis-url (可选)
#    值: REDIS_URL 的值
#
# 9. knowledgehub/s3-bucket-name (可选)
#    值: S3_BUCKET_NAME 的值
#
# 创建命令示例：
# aws secretsmanager create-secret \
#   --name knowledgehub/jwt-secret \
#   --secret-string "your-secret-value" \
#   --region us-east-1

# ==========================================
# 安全提示
# ==========================================

# 1. 永远不要在 Git 中提交真实的密钥
# 2. JWT_SECRET_KEY 必须是强随机字符串
# 3. 定期轮换 API 密钥
# 4. 生产环境必须设置 MODE=production
# 5. 确保 FRONTEND_URL 正确配置以避免 CORS 问题
# 6. 使用 AWS Secrets Manager 存储敏感信息，不要硬编码
# 7. 定期审查 IAM 角色权限
# 8. 启用 RDS 的自动备份和加密

